#!/bin/sh
#
# pre-commit hook for development-tools
# Runs format check before commit
#

echo "üîç Running pre-commit checks..."

# Check if cargo is available
if ! command -v cargo &> /dev/null; then
    echo "‚ùå cargo not found. Please install Rust."
    exit 1
fi

# Run cargo fmt check
echo "üìù Checking code format..."
if ! cargo fmt -- --check 2>/dev/null; then
    echo ""
    echo "‚ùå Format check failed!"
    echo ""
    echo "Running 'cargo fmt' to fix..."
    cargo fmt
    echo ""
    echo "‚úÖ Code formatted. Please review the changes and commit again:"
    echo "   git add -A && git commit"
    echo ""
    exit 1
fi

echo "‚úÖ Format check passed!"
echo ""

exit 0
