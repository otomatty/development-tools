# Large File Finder

é–¾å€¤ä»¥ä¸Šã®è¡Œæ•°ã‚’æŒã¤ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¤œå‡ºã—ã€è¡Œæ•°é™é †ã§è¡¨ç¤ºã™ã‚‹ CLI ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚

## ç‰¹å¾´

- **`.gitignore` è‡ªå‹•é©ç”¨**: ãƒªãƒã‚¸ãƒˆãƒªã® `.gitignore` ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’è‡ªå‹•ã§é™¤å¤–
- **è¡Œæ•°é™é †ã‚½ãƒ¼ãƒˆ**: æœ€ã‚‚å¤§ãã„ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰é †ã«è¡¨ç¤º
- **ä¸Šä½ N ä»¶è¡¨ç¤º**: `--top` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ä¸Šä½ N ä»¶ã®ã¿è¡¨ç¤ºå¯èƒ½
- **è¤‡æ•°å‡ºåŠ›å½¢å¼**: ãƒ†ã‚­ã‚¹ãƒˆï¼ˆã‚«ãƒ©ãƒ¼ï¼‰ã¨ JSON å½¢å¼ã‚’ã‚µãƒãƒ¼ãƒˆ
- **ãƒ—ãƒªã‚»ãƒƒãƒˆæ©Ÿèƒ½**: è¨€èªåˆ¥ã®é™¤å¤–ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆRust, Node.js, Python, Goï¼‰
- **è‡ªå‹•æ¤œå‡º**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆCargo.toml, package.json ç­‰ï¼‰ã‹ã‚‰è¨€èªã‚’è‡ªå‹•æ¤œå‡º
- **è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«**: `.largefile.toml` ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰ã®è¨­å®šã‚’å®šç¾©å¯èƒ½

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
cd tools/large-file-finder
cargo build --release
```

## ä½¿ã„æ–¹

### åŸºæœ¬ä½¿ç”¨

```bash
# ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§500è¡Œä»¥ä¸Šã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¤œå‡ºï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
large-file-finder

# æŒ‡å®šãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ã‚¹ã‚­ãƒ£ãƒ³
large-file-finder ~/projects/my-app

# é–¾å€¤ã‚’å¤‰æ›´ï¼ˆ300è¡Œä»¥ä¸Šï¼‰
large-file-finder --min-lines 300

# ä¸Šä½10ä»¶ã®ã¿è¡¨ç¤º
large-file-finder --top 10
```

### å‡ºåŠ›å½¢å¼

```bash
# ãƒ†ã‚­ã‚¹ãƒˆå‡ºåŠ›ï¼ˆã‚«ãƒ©ãƒ¼è¡¨ç¤ºï¼‰
large-file-finder --output text

# JSONå‡ºåŠ›ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
large-file-finder --output json
```

### ãƒ—ãƒªã‚»ãƒƒãƒˆæ©Ÿèƒ½

```bash
# Rustãƒ—ãƒªã‚»ãƒƒãƒˆã‚’ä½¿ç”¨
large-file-finder --preset rust

# è¤‡æ•°ãƒ—ãƒªã‚»ãƒƒãƒˆã‚’çµ„ã¿åˆã‚ã›
large-file-finder --preset rust,node

# è‡ªå‹•æ¤œå‡ºã‚’ç„¡åŠ¹åŒ–
large-file-finder --no-auto-detect
```

åˆ©ç”¨å¯èƒ½ãªãƒ—ãƒªã‚»ãƒƒãƒˆ:

- `common`: ä¸€èˆ¬çš„ãªé™¤å¤–ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆ.git, node_modules, target ç­‰ï¼‰
- `rust`: Rust ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç”¨ï¼ˆtarget/, \*.rlib ç­‰ï¼‰
- `node`: Node.js ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç”¨ï¼ˆnode_modules/, dist/ ç­‰ï¼‰
- `python`: Python ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç”¨ï¼ˆ`__pycache__`/, .venv/ ç­‰ï¼‰
- `go`: Go ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç”¨ï¼ˆvendor/, \*.exe ç­‰ï¼‰

### è¿½åŠ ã®é™¤å¤–ãƒ‘ã‚¿ãƒ¼ãƒ³

```bash
# è¿½åŠ ã§é™¤å¤–ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æŒ‡å®š
large-file-finder --exclude "generated/**,*.min.js"
```

## è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã« `.largefile.toml` ã‚’é…ç½®ã™ã‚‹ã“ã¨ã§ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰ã®è¨­å®šã‚’å®šç¾©ã§ãã¾ã™ã€‚

### è¨­å®šä¾‹

```toml
# é™¤å¤–ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆ.gitignore ã«åŠ ãˆã¦é©ç”¨ï¼‰
exclude = [
    "generated/**",
    "*.min.js",
    "vendor/**"
]

# æœ€å°è¡Œæ•°ã®é–¾å€¤ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 500ï¼‰
min_lines = 300

# ãƒ—ãƒªã‚»ãƒƒãƒˆè¨­å®š
[presets]
# è‡ªå‹•æ¤œå‡ºã‚’æœ‰åŠ¹åŒ–ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: trueï¼‰
auto_detect = true
# æ‰‹å‹•ã§ãƒ—ãƒªã‚»ãƒƒãƒˆã‚’æŒ‡å®šï¼ˆè‡ªå‹•æ¤œå‡ºã‚ˆã‚Šå„ªå…ˆï¼‰
# manual = ["rust", "node"]
```

### è¨­å®šã®å„ªå…ˆé †ä½

1. CLI ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆæœ€é«˜å„ªå…ˆï¼‰
2. è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ`.largefile.toml`ï¼‰
3. è‡ªå‹•æ¤œå‡º
4. ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤

## å‡ºåŠ›ä¾‹

### ãƒ†ã‚­ã‚¹ãƒˆå‡ºåŠ›

```
â†’ Scanning directory: /Users/user/projects/my-app
â†’ Config: .largefile.toml found
â†’ Min lines threshold: 300
â†’ Showing top 10 files
â†’ Presets: common, rust (auto-detected)
â†’ Excluding: 16 patterns
â†’ Using .gitignore patterns

âœ“ Found 2029 files to analyze

ğŸ” Large File Finder
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

â†’ Scanning: /Users/user/projects/my-app
â†’ Min lines: 300
â†’ Excluding: .gitignore patterns

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Found 5 files with 300+ lines:

    1. 1,927 lines  src/database/models.rs
    2.   854 lines  src/github/client.rs
    3.   821 lines  src/commands/github.rs
    4.   741 lines  docs/prd/home-gamification.md
    5.   512 lines  src/components/contribution_graph.rs

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Total: 5 files, 4,855 lines combined
Scanned: 2,029 files
```

### JSON å‡ºåŠ›

```json
{
  "scan_directory": "/Users/user/projects/my-app",
  "min_lines": 300,
  "presets": ["common", "rust"],
  "files": [
    {
      "path": "src/database/models.rs",
      "lines": 1927
    },
    {
      "path": "src/github/client.rs",
      "lines": 854
    }
  ],
  "total_files_scanned": 2029,
  "total_lines": 4855
}
```

## CLI ã‚ªãƒ—ã‚·ãƒ§ãƒ³

| ã‚ªãƒ—ã‚·ãƒ§ãƒ³         | çŸ­ç¸®å½¢ | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | èª¬æ˜                               |
| ------------------ | ------ | ---------- | ---------------------------------- |
| `--min-lines`      | `-m`   | `500`      | å¤§ãã„ãƒ•ã‚¡ã‚¤ãƒ«ã¨ã¿ãªã™æœ€å°è¡Œæ•°     |
| `--top`            | `-t`   | ãªã—       | ä¸Šä½ N ä»¶ã®ã¿è¡¨ç¤º                  |
| `--output`         | `-o`   | `json`     | å‡ºåŠ›å½¢å¼ (`text` ã¾ãŸã¯ `json`)    |
| `--preset`         | `-p`   | ãªã—       | ãƒ—ãƒªã‚»ãƒƒãƒˆæŒ‡å®šï¼ˆã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šï¼‰     |
| `--no-auto-detect` |        | `false`    | ãƒ—ãƒªã‚»ãƒƒãƒˆè‡ªå‹•æ¤œå‡ºã‚’ç„¡åŠ¹åŒ–         |
| `--exclude`        | `-e`   | ãªã—       | è¿½åŠ ã®é™¤å¤–ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šï¼‰ |

## ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹

### ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°å¯¾è±¡ã®ç‰¹å®š

```bash
# 1000è¡Œä»¥ä¸Šã®å·¨å¤§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¦‹ã¤ã‘ã‚‹
large-file-finder --min-lines 1000 --output text
```

### ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼å‰ã®ãƒã‚§ãƒƒã‚¯

```bash
# æ–°è¦è¿½åŠ ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã®è‚¥å¤§åŒ–ã‚’ãƒã‚§ãƒƒã‚¯
large-file-finder --min-lines 300 --top 10
```

### CI/CD ã§ã®å“è³ªãƒã‚§ãƒƒã‚¯

```bash
# JSONå‡ºåŠ›ã§é–¾å€¤è¶…ãˆãƒ•ã‚¡ã‚¤ãƒ«æ•°ã‚’ãƒã‚§ãƒƒã‚¯
large-file-finder --min-lines 500 --output json | jq '.files | length'
```

## æŠ€è¡“è©³ç´°

- **ãƒ•ã‚¡ã‚¤ãƒ«ã‚¹ã‚­ãƒ£ãƒ³**: `ignore` crate ã‚’ä½¿ç”¨ã—ã€`.gitignore`ã€`.git/info/exclude`ã€ã‚°ãƒ­ãƒ¼ãƒãƒ« gitignore ã‚’è‡ªå‹•çš„ã«è€ƒæ…®
- **ãƒã‚¤ãƒŠãƒªãƒ•ã‚¡ã‚¤ãƒ«æ¤œå‡º**: ãƒ•ã‚¡ã‚¤ãƒ«å…ˆé ­ 512 ãƒã‚¤ãƒˆã‚’èª­ã¿å–ã‚Šã€NULL ãƒã‚¤ãƒˆãŒå«ã¾ã‚Œã‚‹å ´åˆã¯ã‚¹ã‚­ãƒƒãƒ—
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**: `BufReader`ã‚’ä½¿ç”¨ã—ãŸåŠ¹ç‡çš„ãªè¡Œã‚«ã‚¦ãƒ³ãƒˆ

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT
